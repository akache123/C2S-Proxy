# C2S-Proxy

Here is a README file and a short description for your C2S Proxy project:

### README File

```markdown
# C2S Proxy: HTTP to HTTPS Conversion, Access Control, and Logging

## Overview

This project implements a proxy HTTP server that performs the following tasks:

- **HTTP to HTTPS Conversion**: Converts incoming HTTP requests into HTTPS requests.
- **Access Control**: Blocks access to websites listed in the forbidden sites file.
- **Logging**: Maintains detailed logs of requests, including client information, requested URLs, and status codes.
- **Connection Management**: Manages persistent connections to optimize resource usage, handles errors gracefully, and supports concurrent requests.
- **Forbidden Sites Reloading**: Allows the proxy server to reload the forbidden sites list without termination when a 'Control-C' signal is received.

The proxy server ensures stable operation even during idle or stalled connections and implements timeout mechanisms to clean up unused resources.

## Project Structure

1. **src/**  
   Contains source files for the proxy server.  
   - `proxy.cpp`: Main source code for the proxy server implementation.

2. **bin/**  
   Executable generated by the Makefile.  
   - `myproxy`: Compiled proxy server executable.

3. **doc/**  
   Documentation for the proxy server, including internal design, usage instructions, and limitations.  
   - `README.pdf`: Detailed project documentation.

4. **Makefile**  
   Used to build the proxy server program from the source files.

## Building the Project

1. Clone the repository to your local machine:
    ```bash
    git clone <repository_url>
    ```

2. Navigate to the project directory:
    ```bash
    cd C2S-Proxy
    ```

3. Run the `make` command to build the proxy server executable:
    ```bash
    make
    ```

4. The compiled executable (`myproxy`) will be located in the `bin/` directory.

## Running the Proxy Server

To start the proxy server, use the following command:
```bash
./myproxy <listen_port> <forbidden_sites_file> <access_log_file>
```

For example:
```bash
./myproxy 8080 forbidden_sites.txt access.log
```

- `listen_port`: The port on which the proxy server listens for incoming connections.
- `forbidden_sites_file`: The path to the file containing the list of forbidden websites.
- `access_log_file`: The file to log all access details.

## Logging

The proxy server maintains an access log (`access.log`) that records the following details for each request:
- Date and time of the request
- Client IP address
- Requested URL
- HTTP status code returned
- Length of the response in bytes

## Test Cases

Here are some test cases you can perform:

1. **Accessing Allowed Website**
    - Command: `curl -x http://localhost:8080 http://www.example.com`
    - Expected Output: Successful connection and logged request.

2. **Accessing Forbidden Website**
    - Command: `curl -x http://localhost:8080 http://www.youtube.com`
    - Expected Output: 403 Forbidden response and logged request.

3. **Concurrent Requests**
    - Open multiple tabs or terminals and send requests simultaneously to the proxy server.
    - Expected Output: All requests should be handled without errors.

4. **Forbidden Sites Reloading**
    - Press `Control-C` to reload the forbidden sites file.
    - Expected Output: The proxy server reloads the list without termination.

## References

- Class Textbook: Unix Network Programming, Volume 1: The Sockets Networking API, 3/EW. Richard Stevens, Bill Fenner, M. Rudoff
- [W3Schools Cybersecurity](https://www.w3schools.com/cybersecurity/cybersecurity_network_transport.php)
- [GeeksforGeeks - UDP Server-Client Implementation](https://www.geeksforgeeks.org/udp-server-client-implementation-c/)
- [StackOverflow - Proxy Server in C using Boost](https://stackoverflow.com/questions/11421678/how-to-make-a-proxy-server-in-c-using-boost)
- [StackOverflow - How to set a proxy for wget](https://stackoverflow.com/questions/11211705/how-can-i-set-a-proxy-for-wget)

```
